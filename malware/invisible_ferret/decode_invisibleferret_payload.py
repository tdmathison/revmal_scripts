import base64
import zlib

# Replace with base64 content within the exec function
payload = b'==XXX'

# Performs decode/decompress and returns the next level
# of content within the exec function
def decode(payload):
    payload2 = payload[::-1]
    payload3 = base64.b64decode(payload2)
    payload4 = zlib.decompress(payload3)
    return payload4[11:len(payload4)-1]

# Attempts to decode the content (up to 255 iterations)
for x in range(255):
    payload = decode(payload)
    if b'import' in payload:
        print(f'iteration: {x+1}')
        break
    
# Print the decoded content
for line in payload.split(b'\n'):
    print(line.decode('utf-8'))
